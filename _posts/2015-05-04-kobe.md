---
layout: post
title: Kobe Bryant Shooting
author: Ryan Burge
date: "April 27, 2016"
always_allow_html: "yes"
output: md_document
published: true
description: "Does Kobe Bryant Shoot Better Against Certain Teams?"
headline: Kobe is not a machine
excerpt: Kobe Bryant Shooting Across his Career
modified: ""
categories: ""
tags: ""
imagefeature: ""
mathjax: false
featured: false
comments: false
---
I want to do some quick and broad data exploration to see if Kobe is a better shooter against certain opponents. The nice thing about Kobe is that he's played basketball for so long that he a nice amount of data from each team and from each season. Because of that we can get a good sense of how Kobe has changed his game over time. 

```
library(ggplot2) # Data visualization
library(readr) # CSV file I/O, e.g. the read_csv function
library(dplyr)
library(DT)
kobe <- read.csv("D:/kobe/kobe.csv", stringsAsFactors = FALSE)
```

I need to take a look at the important variable first, kobe$shot_made_flag.

```
head(kobe$shot_made_flag, 50)
```

There are a lot of NAs in there, that will make this difficult so I am just going to ignore them for this analysis, I don't think it can make a huge difference in the final analysis. 

```
team <- aggregate(kobe$shot_made_flag, list(kobe$opponent), na.rm = TRUE, mean)
team <- arrange(team, x)
head(team, 33)
```

So, I've got what I need now. A smaller dataframe with just the opponents name and Kobe's shooting percentage against them. I want to add a little extra analysis, so I am going to create a vector that lists the conferences of each opponent. There's not an easy way to do this, so I will just do it by hand. 

```
team$conference <- c("Eastern", "Eastern", "Western", "Eastern", "Eastern" ,"Western", "Eastern", "Eastern" , "Eastern" , "Western" , "Eastern", "Eastern", "Eastern", "Eastern" , "Western" , "Eastern", "Eastern", "Western", "Western", "Eastern", "Western" , "Eastern", "Eastern", "Western", "Western", "Western", "Western" , "Western", "Western", "Western", "Western", "Western", "Eastern" )
```

Looks good so let's plot. I want this to be plotted in order of best shooting percentage to worst shooting percentage. I am also going to add in a horizontal line indicating Kobe's overall shooting percentage, which is 43.9%. 

```
ggplot(team, aes(x=reorder(Group.1, -x), y = x)) + geom_bar(aes(fill=conference),stat="identity")  + ylim(0,.5) + theme(axis.text.x = element_text(angle = 90)) + xlab("Opponent's Name") + ylab("Shooting Percentage") + geom_hline(yintercept = .43)
```

![center](https://raw.githubusercontent.com/ryanburge/kobe/master/kobe_markdown_files/figure-markdown_strict/unnamed-chunk-6-1.png)

So there's something interesting. Kobe shoots better against the Western conference than the Eastern Conference. That may be an interesting feature to use. 

I also want to see if Kobe really declined near the end of his career. I know that he tore his Achilles and missed a lot of time. Again, I'm adding a line to indicate Kobe's lifetime shooting percentage. 

```
season <- aggregate(kobe$shot_made_flag, list(kobe$season), na.rm = TRUE, mean)
ggplot(season, aes(x=Group.1, y = x)) + geom_bar(stat="identity")  + ylim(0,.5) + theme(axis.text.x = element_text(angle = 90, hjust = 1)) + xlab("Season") + ylab("Shooting Percentage") + geom_hline(yintercept = .43)
```

![center](https://raw.githubusercontent.com/ryanburge/kobe/master/kobe_markdown_files/figure-markdown_strict/unnamed-chunk-7-1.png)

Yeah, it's pretty clear that Kobe was really consistent for a long period of time. He was a very consistent shooter from 1996 to 2013-2014. The last three years were ugly with his shooting percentage doropping pretty significantly near the end. 

Here's a quick data table to show that decline in a different format.  
```
datatable(season, class = 'compact')
```



Those last three years are pretty brutal. 40.6%, 37.6%, and 35.6%. Much lower than Kobe was used to. He knew he was in terminal decline and decided to retire.
